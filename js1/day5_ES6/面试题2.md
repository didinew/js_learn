âŒ å¿…æŒ‚é™·é˜±é¢˜ï¼šè§£æ„å‚æ•°çš„ã€Œéšå½¢ç‚¸å¼¹ã€

â“ é¢˜ç›®

ä¸‹é¢ä»£ç æœ‰æ²¡æœ‰é—®é¢˜ï¼Ÿå¦‚æœæœ‰ï¼Œé—®é¢˜åœ¨å“ªï¼Ÿ

function createUser({ name, age = 18, isAdmin = false }) {
  console.log(name, age, isAdmin);
}


â¸»

âŒ 90% çš„å›ç­”

â€œæ²¡é—®é¢˜å•Šï¼Œç”¨äº†è§£æ„å’Œé»˜è®¤å€¼â€

ğŸ‘‰ ç›´æ¥æŒ‚

â¸»

âš ï¸ çœŸæ­£çš„ Bugï¼ˆå…³é”®ï¼‰

å½“å‡½æ•°è¿™æ ·è°ƒç”¨æ—¶ï¼š

createUser();

ğŸ’¥ ç›´æ¥æŠ¥é”™

TypeError: Cannot destructure property 'name' of 'undefined'


â¸»

ğŸ§  åŸå› æ‹†è§£ï¼ˆé¢è¯•å®˜æƒ³å¬çš„ï¼‰

JS æ‰§è¡Œé¡ºåºæ˜¯è¿™æ ·çš„ï¼š

function createUser({ ... }) {}

ç­‰ä»·äºï¼š

function createUser(param) {
  const { name, age = 18, isAdmin = false } = param;
}

â— å½“ param === undefined æ—¶ï¼Œè§£æ„ç«‹å³å¤±è´¥
â— é»˜è®¤å€¼ age = 18 æ ¹æœ¬æ¥ä¸åŠæ‰§è¡Œ


âœ… æ­£ç¡®å†™æ³•ï¼ˆæ ‡å‡†ç­”æ¡ˆï¼‰
function createUser({ name, age = 18, isAdmin = false } = {}) {
  console.log(name, age, isAdmin);
}

å†æ‰§è¡Œ
createUser();
âœ… è¾“å‡ºï¼š
undefined 18 false


â¸»

ğŸ¯ é¢è¯•å®˜çœŸå®è€ƒç‚¹

1ï¸âƒ£ ä½ æ˜¯å¦ç†è§£ã€Œè§£æ„å‘ç”Ÿåœ¨å‡½æ•°å‚æ•°é˜¶æ®µã€

ä¸æ˜¯å‡½æ•°ä½“å†…éƒ¨ã€‚

2ï¸âƒ£ ä½ æ˜¯å¦çŸ¥é“ã€Œé»˜è®¤å€¼åªå¯¹ undefined ç”Ÿæ•ˆã€

è€Œä¸æ˜¯å¯¹æ•´ä¸ªå‚æ•°å…œåº•ã€‚

3ï¸âƒ£ ä½ å†™çš„å‡½æ•°æ˜¯å¦ å¥å£®

â¸»

ğŸ”¥ è¿›é˜¶éšè—å‘ï¼ˆæ›´ç‹ ï¼‰

â“ å†çœ‹è¿™æ®µä»£ç ï¼Œæœ‰æ²¡æœ‰å‘ï¼Ÿ

function fetchData({ timeout = 3000 } = {}) {
  console.log(timeout);
}

fetchData({ timeout: null });

âŒ å¾ˆå¤šäººä¼šè¯´

â€œè¾“å‡º 3000â€

âœ… æ­£ç¡®ç­”æ¡ˆ

null

ä¸ºä»€ä¹ˆï¼Ÿ
	â€¢	è§£æ„é»˜è®¤å€¼ åªåœ¨ === undefined æ—¶ç”Ÿæ•ˆ
	â€¢	null æ˜¯ã€Œæ˜ç¡®çš„å€¼ã€

ğŸ‘‰ è¿™åœ¨æ¥å£æ•°æ®ä¸­æå¸¸è§

â¸»

ğŸ§¨ å†æ¥ä¸€ä¸ªã€Œçº¿ä¸ŠçœŸå®äº‹æ•…çº§ã€å‘

function request({ retry = 3 } = {}) {
  retry = retry || 3;
  console.log(retry);
}

request({ retry: 0 });

âŒ å®é™…è¾“å‡º

3

ğŸ’¥ çœŸå®æ„å›¾
0

ğŸ‘‰ åŒé‡å…œåº• = è‡ªæ€å¼å†™æ³•

âœ… æ­£ç¡®å§¿åŠ¿

function request({ retry = 3 } = {}) {
  console.log(retry);
}

æˆ–æ›´ä¸¥è°¨ï¼š

const finalRetry = retry ?? 3;


â¸»

ğŸ§  é¢è¯•å®˜ç»ˆæè¿½é—®ï¼ˆæ€ä¼¤åŠ› MAXï¼‰

ä¸ºä»€ä¹ˆè§£æ„å‚æ•° + é»˜è®¤å€¼æ¯” || æ›´å®‰å…¨ï¼Ÿ

æ»¡åˆ†å›ç­”

å› ä¸ºè§£æ„é»˜è®¤å€¼åªåœ¨å‚æ•°ä¸º undefined æ—¶è§¦å‘ï¼Œè€Œ || ä¼šè¯¯åˆ¤åˆæ³•çš„ falsy å€¼ï¼Œå®¹æ˜“å¼•å‘çº¿ä¸Šé€»è¾‘é”™è¯¯ã€‚

â¸»

ğŸ“Œ ä¸€å¥è¯å°ç¥æ€»ç»“ï¼ˆèƒŒï¼‰

è§£æ„å‚æ•°çš„é»˜è®¤å€¼å¹¶ä¸ä¼šå…œåº•æ•´ä¸ªå‚æ•°å¯¹è±¡ï¼Œå¿…é¡»æ˜¾å¼ç»™å‚æ•°ä¸€ä¸ªé»˜è®¤ç©ºå¯¹è±¡ï¼Œå¦åˆ™åœ¨æœªä¼ å‚æ—¶ä¼šç›´æ¥æŠ›é”™ã€‚

