
⸻

1️⃣ map 渲染数组时 key 的作用是什么？

在 React 中，我们经常写：

{items.map(item => <li key={item.id}>{item.name}</li>)}

作用：
	1.	帮助 React 区分元素
	•	key 是 React 用来标识虚拟 DOM 中元素的唯一标识。
	•	当列表更新时，React 会根据 key 来判断哪些元素被添加、删除或移动，从而尽量复用已有 DOM 节点。
	2.	优化渲染性能
	•	如果没有 key 或 key 不唯一，React 会“破坏性地”重建整个列表的 DOM，性能差。
	•	有了稳定的 key，只更新必要的部分，减少 DOM 操作。

🔹 总结：key 的本质是唯一标识，让 React 能够高效地对比和更新列表。

⸻

2️⃣ index 做 key 有什么风险？

常见写法：

{items.map((item, index) => <li key={index}>{item.name}</li>)}

风险：
	1.	列表顺序变化会导致问题
	•	如果列表插入、删除或排序，用 index 作为 key，会导致 React 误复用 DOM。
	•	比如输入框的值、动画状态可能会错乱。
	2.	状态/输入错误
	•	组件内部有 state 或 input 元素时，DOM 复用错误会让状态混乱。

安全场景：
	•	列表是静态、不变且不会重新排序或增删元素时，可以用 index。

⚠️ 面试常问：尽量用唯一且稳定的 id，不要随便用 index。

⸻

3️⃣ 父子组件如何通信？子组件能修改父组件状态吗？

父 → 子（props）
	•	父组件通过 props 传递数据或回调给子组件

  <Child data={parentData} onChange={handleChange} />

  子 → 父（回调函数）
	•	子组件通过调用父组件传递的函数修改父组件状态：
  function Child({ onChange }) {
  return <button onClick={() => onChange('new value')}>修改父状态</button>;
}
注意：
	•	子组件不能直接修改父组件 state（React 单向数据流原则）。
	•	可以通过props 回调让父组件自己修改 state。

⸻

4️⃣ 条件渲染有哪些方式？返回 null 会发生什么？

常见方式：
	1.	三元表达式（最常用）：
  {isVisible ? <Component /> : null}

  	2.	逻辑与（&&）
    {isVisible && <Component />}

    	•	当 isVisible 为 false，React 会忽略 <Component />。

	3.	if/else 包裹函数：

  function renderComponent() {
  if (!isVisible) return null;
  return <Component />;
}
	4.	条件返回不同组件

  return isVisible ? <A /> : <B />;


  返回 null 的作用：
	•	React 不会渲染任何 DOM，相当于“不显示这个组件”。
	•	但是组件生命周期仍然执行（函数组件会执行函数体，类组件会触发 componentDidMount / componentWillUnmount 等）。

✅ 总结面试点：
	•	key 用于唯一标识，提高渲染性能
	•	index 作为 key 有潜在风险
	•	父子通信：props + 回调，子不能直接修改父状态
	•	条件渲染：三元 / && / if 函数 / return null
	•	返回 null = 不渲染任何 DOM


