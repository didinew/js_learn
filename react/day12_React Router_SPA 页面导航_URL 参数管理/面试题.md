1️⃣ 自定义 Hook 的作用是什么？

作用：
自定义 Hook（Custom Hook）本质上是封装可复用逻辑的函数，它能让你把组件逻辑抽离出来，而不改变组件本身的功能。

特点：
	•	必须以 use 开头命名（如 useForm、useFetch）。
	•	可以复用状态（state）、副作用（effect）、事件处理函数等。
	•	不依赖具体组件类型，可以在多个组件中复用。

示例：封装一个表单状态管理 Hook

import { useState } from "react";

function useForm(initialValues) {
  const [form, setForm] = useState(initialValues);

  const handleChange = (e) => {
    const { name, value } = e.target;
    setForm((prev) => ({ ...prev, [name]: value }));
  };

  const resetForm = () => setForm(initialValues);

  return { form, handleChange, resetForm };
}

好处：
	•	组件更干净：只关心 UI。
	•	逻辑统一管理，方便维护。
	•	可以在不同表单或页面复用。

⸻

2️⃣ 多输入表单如何统一管理 state？

问题：表单有多个输入框，每个输入框都可能独立改变，如果用单独 useState 很麻烦。

解决方案：
	•	使用 对象状态，一个 useState 管理整个表单：

  const [form, setForm] = useState({ username: "", email: "", password: "" });

const handleChange = (e) => {
  const { name, value } = e.target;
  setForm(prev => ({ ...prev, [name]: value }));
};

	•	或者使用 useReducer 管理复杂表单逻辑：

  const reducer = (state, action) => {
  switch(action.type) {
    case "CHANGE":
      return { ...state, [action.name]: action.value };
    case "RESET":
      return action.initialState;
    default:
      return state;
  }
};

const [form, dispatch] = useReducer(reducer, { username: "", email: "" });

✅ 优点：
	•	单点管理表单状态。
	•	handleChange 可通用所有输入。
	•	可以轻松 reset/validate。

⸻

3️⃣ Hook + Dumb/Smart 组件如何分离逻辑和 UI？

概念回顾：
	•	Smart Component（Container）：处理逻辑、状态、API 调用。
	•	Dumb Component（Presentational）：只负责渲染 UI，通过 props 获取数据和回调。

结合自定义 Hook：

// Smart
function SignUpFormContainer() {
  const { form, handleChange, resetForm } = useForm({ username: "", email: "" });

  const handleSubmit = (e) => {
    e.preventDefault();
    console.log("提交表单", form);
    resetForm();
  };

  return <SignUpForm form={form} onChange={handleChange} onSubmit={handleSubmit} />;
}

// Dumb
function SignUpForm({ form, onChange, onSubmit }) {
  return (
    <form onSubmit={onSubmit}>
      <input name="username" value={form.username} onChange={onChange} />
      <input name="email" value={form.email} onChange={onChange} />
      <button type="submit">提交</button>
    </form>
  );
}

优势：
	•	Dumb 组件完全无状态，纯粹渲染。
	•	Smart + Hook 处理状态逻辑，可复用。
	•	逻辑和 UI 清晰分离，便于测试和维护。

⸻

4️⃣ resetForm 是怎么工作的？

resetForm 的核心原理：
	•	将表单状态回到 初始值。
	•	本质上就是 setState(initialValues) 或 dispatch({ type: 'RESET', initialState })。

示例（上面 useForm 中的实现）：

const resetForm = () => setForm(initialValues);

✅ 执行流程：
	1.	用户点击重置按钮。
	2.	调用 resetForm()。
	3.	内部执行 setForm(initialValues)。
	4.	React 重新渲染表单，input 的 value 被重置。

⚠️ 注意点：
	•	如果初始值是 动态的，建议在 Hook 内用 useRef 保存最初的状态。
	•	对于复杂表单（嵌套对象/数组），需要做深拷贝以避免引用污染。


🟢 Day 13：嵌套路由 + Layout + 路由权限控制

Q1：为什么不用 if 判断登录？

路由层统一控制，解耦页面逻辑，结构更清晰

Q2：Outlet 是什么？

子路由占位符，决定子页面渲染位置

Q3：权限控制一般写在哪？

路由层 / 高阶组件，而不是业务组件内部

