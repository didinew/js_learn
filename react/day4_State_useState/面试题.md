
⸻

1️⃣ state 和 props 的区别

特性
state
props
定义
组件内部维护的可变数据
组件外部传入的数据
修改方式
只能通过 setState 或 useState 提供的更新函数修改
只读，组件内部不能修改
用途
用于组件自身状态管理，比如计数器值、表单输入
用于父组件向子组件传递数据或回调
生命周期
与组件绑定，组件卸载时消失
不随组件卸载而改变，由父组件控制


✅ 记忆口诀：
	•	props 是 “外部传来的只读数据”，
	•	state 是 “组件内部自己管的可变数据”。

⸻

2️⃣ useState 如何正确更新对象/数组？

useState 更新 对象/数组 时，需要注意 不可直接修改原对象/数组，必须创建新对象/数组，否则 React 可能不会触发重新渲染。

数组示例

const [items, setItems] = useState([1, 2, 3]);

// 添加元素
setItems(prevItems => [...prevItems, 4]);

// 删除元素
setItems(prevItems => prevItems.filter(item => item !== 2));

对象示例

const [user, setUser] = useState({ name: 'Alice', age: 18 });

// 更新 age
setUser(prevUser => ({ ...prevUser, age: 19 }));

// 更新 name
setUser(prevUser => ({ ...prevUser, name: 'Bob' }));

💡 核心点：永远不要直接修改 state（如 user.age = 19），要生成新对象/数组。

⸻

3️⃣ 为什么 React 渲染 UI 不需要手动操作 DOM？
	•	React 使用 虚拟 DOM (Virtual DOM) 来管理 UI：
	1.	组件状态 (state/props) 变化 → React 重新生成虚拟 DOM。
	2.	React 对比前后虚拟 DOM (diff) → 找到最小的变更。
	3.	只把变更部分更新到真实 DOM。

✅ 好处：
	•	避免手动操作 DOM 的繁琐和错误。
	•	提升性能，因为真实 DOM 更新成本高，React 只更新必要的部分。
	•	代码更声明式：告诉 React “UI 应该长什么样”，不用管“怎么改”。

⸻

4️⃣ 受控组件是什么？
	•	定义：表单元素（input、textarea、select 等）的 值由 React state 控制，组件的值完全依赖 state。
	•	特点：
	•	用户输入 → onChange → 更新 state → state 决定 input 的值。
	•	可以对表单值做验证、格式化、联动等。

示例

const [value, setValue] = useState('');

<input 
  type="text" 
  value={value} 
  onChange={e => setValue(e.target.value)} 
/>

	•	非受控组件：不受 React 管理，直接操作 DOM 获取值：

	<input type="text" ref={inputRef} />

	✅ 记忆技巧：
	•	受控组件 = React 管控表单。
	•	非受控组件 = DOM 自行管理表单。

